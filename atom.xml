<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Ashish Singh]]></title>
  <link href="http://git-ashish.github.com/atom.xml" rel="self"/>
  <link href="http://git-ashish.github.com/"/>
  <updated>2013-12-11T11:33:53-08:00</updated>
  <id>http://git-ashish.github.com/</id>
  <author>
    <name><![CDATA[Ashish Singh]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[JavaScript Date Difference using format yyyy-mm-dd]]></title>
    <link href="http://git-ashish.github.com/2013/12/11/javascript-date-difference-using-format-yyyy-mm-dd/"/>
    <updated>2013-12-11T10:20:00-08:00</updated>
    <id>http://git-ashish.github.com/2013/12/11/javascript-date-difference-using-format-yyyy-mm-dd</id>
    <content type="html"><![CDATA[<p>Finding date differences in JavaScript Date objects is trivial but it takes a turn when dealing with multiple timzones. Well, that is up for another discussion but for now let&#8217;s consider 2 cases of finding difference between two dates using below date formats.</p>

<h2>Using date format - mm/dd/yyyy &amp; yyyy-mm-dd to find difference</h2>

<figure class='code'><figcaption><span>Difference between using mm/dd/yyyy & yyyy-mm-dd</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">start_date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;12/01/2013&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">end_date</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
</span><span class='line'>    <span class="nx">one_day_in_milliseconds</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">date_diff</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span> <span class="p">(</span> <span class="nx">end_date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start_date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="p">)</span><span class="o">/</span><span class="nx">one_day_in_milliseconds</span> <span class="p">)</span> <span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result 1 - Date difference between &quot;</span><span class="p">,</span><span class="nx">end_date</span><span class="p">,</span> <span class="s2">&quot; &amp; &quot;</span><span class="p">,</span><span class="nx">start_date</span><span class="p">,</span> <span class="s2">&quot; - &quot;</span><span class="p">,</span> <span class="nx">date_diff</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">s_date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s1">&#39;2013-12-01&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">date_diff_2</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span> <span class="p">(</span> <span class="nx">end_date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">s_date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="p">)</span><span class="o">/</span><span class="nx">one_day_in_milliseconds</span> <span class="p">)</span> <span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result 2 - Date difference between &quot;</span><span class="p">,</span><span class="nx">end_date</span><span class="p">,</span> <span class="s2">&quot; &amp; &quot;</span><span class="p">,</span><span class="nx">s_date</span><span class="p">,</span> <span class="s2">&quot; - &quot;</span><span class="p">,</span> <span class="nx">date_diff_2</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>You may notice that the difference from both these ways differs by <code>1</code>. If this is the case and you&#8217;re using second format [yyyy-mm-dd], then you can solve this using following technique.</p>

<h2>Solution</h2>

<figure class='code'><figcaption><span>Difference between 2 dates using yyyy-mm-dd</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">getNewDate</span><span class="p">(</span><span class="nx">dateString</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">dateString</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">dateString</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
</span><span class='line'>      <span class="nx">timezoneOffset</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="nx">timezoneOffset</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">1000</span><span class="o">*</span><span class="p">(</span><span class="nx">dateString</span><span class="o">?</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">)</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">start_date</span> <span class="o">=</span> <span class="nx">getNewDate</span><span class="p">(</span><span class="s1">&#39;2013-12-01&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">end_date</span>   <span class="o">=</span> <span class="nx">getNewDate</span><span class="p">(),</span>
</span><span class='line'>    <span class="nx">one_day_in_milliseconds</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">date_diff</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span> <span class="p">(</span> <span class="nx">end_date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start_date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="p">)</span><span class="o">/</span><span class="nx">one_day_in_milliseconds</span> <span class="p">)</span> <span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Date difference between &quot;</span><span class="p">,</span><span class="nx">end_date</span><span class="p">,</span> <span class="s2">&quot; &amp; &quot;</span><span class="p">,</span><span class="nx">start_date</span><span class="p">,</span> <span class="s2">&quot; - &quot;</span><span class="p">,</span> <span class="nx">date_diff</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we are considering the timezone offset when a new Date object is created using dateString in  format yyyy-mm-dd.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Deploy to Amazon EC2 using GIT]]></title>
    <link href="http://git-ashish.github.com/2013/05/19/deploy-to-amazon-ec2-using-git/"/>
    <updated>2013-05-19T18:04:00-07:00</updated>
    <id>http://git-ashish.github.com/2013/05/19/deploy-to-amazon-ec2-using-git</id>
    <content type="html"><![CDATA[<p><a href="http://git-scm.com/" title="Git‎">Git</a> is an amazing and indispensable tool. We use it for tracking all of our development work. It just becomes more cooler when you are able to push your code to a production or sandbox server with a simple <a href="http://git-scm.com/book/ch2-5.html%E2%80%8E">git push</a>.</p>

<p>Below listed are simple yet powerful steps to get you pushing your code to an Amazon EC2 server or any other linux server, where you have <a href="http://en.wikipedia.org/wiki/Secure_Shell%E2%80%8E">SSH</a> access.</p>

<h2>Install git on your Server</h2>

<p>First SSH into your remote server from you local machine. Use the private key file (.pem key) that you&#8217;ve downloaded from the Amazon EC2 server setup process on aws console. If you don&#8217;t have it yet, Go to your aws console -> EC2 server -> Network &amp; Security -> Key Pairs -> Create Key Pair</p>

<p>Once you&#8217;ve created the private key, it&#8217;ll automatically be downloaded to your machine. Move it a folder where you wish to keep the key. Also, change its permission to 0400</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chmod 0400 /path/to/my-amazon-key.pem</span></code></pre></td></tr></table></div></figure>


<p>Now, lets use this private key to connect to your newly created ec2 server.</p>

<p>Open console and type:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh -i /path/to/my-amazon-key.pem ec2-user@example-webserver.amazonaws.com</span></code></pre></td></tr></table></div></figure>


<p>If you&#8217;ve downloaded and set key&#8217;s permission correctly, you should now be on the ec2 server&#8217;s console. Now, install git on the ec2 server.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// on your ec2 server
</span><span class='line'>ubuntu@ip-xxx-xxx-xx-xxx:~$ sudo apt-get install git</span></code></pre></td></tr></table></div></figure>


<p>Perfect! You&#8217;re one step closer to push your local git repo to the ec2 server.</p>

<h2>Setup SSH Access for different ec2 servers</h2>

<p>Say, you&#8217;ve more than one ec2 servers. To make your life easier, it is desirable to set up a SSH config file which basically holds information needed to SSH into your remote ec2 server.</p>

<p>On your local machine, open file [or create one] <code>~/.ssh/config</code> and add this code for each of your ec2 servers. Replace Host, Hostname, User and IdentityFile values with yours.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Host my-prod-server
</span><span class='line'>Hostname example-webserver.amazonaws.com
</span><span class='line'>User ec2-user
</span><span class='line'>IdentityFile /path/to/my-amazon-key.pem
</span><span class='line'>
</span><span class='line'>Host my-sandbox-server
</span><span class='line'>Hostname example-webserver.amazonaws.com
</span><span class='line'>User ec2-user
</span><span class='line'>IdentityFile /path/to/my-sandbox-amazon-key.pem</span></code></pre></td></tr></table></div></figure>


<h2>Test the connection</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh my-prod-server</span></code></pre></td></tr></table></div></figure>


<p>Hurray, if you get connected to your server otherwise debug using this.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh -Tvvv my-prod-server</span></code></pre></td></tr></table></div></figure>


<!-- more -->


<h2>Setup Git Repo on Amazon EC2 Server</h2>

<p>By now, you should have access to your ec2 server from your local machine and Git installed on your ec2 server. The next step is to create a Git repository on your remote ec2 server, to which we&#8217;ll be pushing all your code.</p>

<p>Let&#8217;s set it up.</p>

<p>SSH into your remote ec2 server and create a directory for holding all such git repos.
Assuming you&#8217;re creating this directory under /home/ubuntu/ which is the home directory of default user ubuntu.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir -p git-repo/my-git-repo.git
</span><span class='line'>cd git-repo/my-git-repo.git
</span><span class='line'>git init --bare</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s it! Now, your remote Git repo on the ec2 server is setup.</p>

<h2>Add Amazon EC2 git repo as remote in your local git repo</h2>

<p>We now need to make this Git repo on the ec2 server as a remote repository of our local Git repo.</p>

<p>On your local machine&#8217;s git repo, add Amazon EC2 git repo as a remote.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// on your local machine
</span><span class='line'>
</span><span class='line'>git remote add production my-prod-server:/home/ubuntu/git-repo/my-git-repo.git</span></code></pre></td></tr></table></div></figure>


<p>Beauty! Your remote Git repo is setup and you can also use it as a private git repo, an alternative to Github paid plan ;)</p>

<p>Let&#8217;s make this remote git repo to push the code to the http server on the same ec2 server machine.</p>

<h2>Post-receive Hook on Amazon EC2 git repo</h2>

<p>Up till now you&#8217;ve setup a working remote git repo on Amazon EC2 server. To push your code to the apache web directory <code>/var/www/example.com/public_html/</code>, we&#8217;ll need to add a <a href="http://git-scm.com/book/en/Customizing-Git-Git-Hooks">post-receive hook</a>.</p>

<p>Go to your git repo on Amazon EC2 server <code>/home/ubuntu/git-repo/my-git-repo.git</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /home/ubuntu/git-repo/my-git-repo.git
</span><span class='line'>
</span><span class='line'>vi hooks/post-receive</span></code></pre></td></tr></table></div></figure>


<p>Add following code in the file</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>
</span><span class='line'>while read oldrev newrev ref
</span><span class='line'>do
</span><span class='line'>  branch=`echo $ref | cut -d/ -f3`
</span><span class='line'>  if [ "production" == "$branch" -o "master" == "$branch" ]; then
</span><span class='line'>    
</span><span class='line'>    git --work-tree=/var/www/example.com/public_html/ checkout -f $branch
</span><span class='line'>    
</span><span class='line'>    echo 'Changes pushed to Amazon EC2 PROD.'
</span><span class='line'>  fi
</span><span class='line'>
</span><span class='line'>  if [ "smoke" == "$branch" ]; then
</span><span class='line'>    
</span><span class='line'>    git --work-tree=/var/www/example.com/public_html/smoke/ checkout -f $branch
</span><span class='line'>    
</span><span class='line'>    echo 'Changes pushed to Amazon EC2 PROD smoke box.'
</span><span class='line'>  fi
</span><span class='line'>done</span></code></pre></td></tr></table></div></figure>


<p>The first <code>if</code> block will copy the working directory code of <code>production</code> or <code>master</code> branch of the repo, to the web server path whenever you do a push to this remote git repo from your local git repo.</p>

<p>Similarly, if you push a <code>smoke</code> named branch to the Amazon ec2 git repo, it will copy the code to smoke test directory <code>/var/www/example.com/public_html/smoke/</code> on the ec2 server.</p>

<p>So effectively, there are two purposes getting solved here. First, you can user the server for hosting your code&#8217;s git repo. Second, for pushing the code to web server directory without doing any FTP anytime you make some changes to reflect on the ec2 server.</p>

<p>Happy Git-ting!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Auto deploy to Buffer]]></title>
    <link href="http://git-ashish.github.com/2013/04/06/auto-deploy-to-buffer/"/>
    <updated>2013-04-06T01:09:00-07:00</updated>
    <id>http://git-ashish.github.com/2013/04/06/auto-deploy-to-buffer</id>
    <content type="html"><![CDATA[<p>Octopress is a great simple tool for blogging. A lot of custom stuff can be built upon it. Here is how you can use <a href="https://bufferapp.com">BufferApp</a> to share you posts to your social networks.</p>

<!-- more -->


<h2>Access Token</h2>

<p>Create an app in your Buffer account and get the app&#8217;s access token.</p>

<h2>Buffer gem</h2>

<p>Install Buffer gem using</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install buffer </span></code></pre></td></tr></table></div></figure>


<p>Open the Gemfile and edit below section to make it look like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">group</span> <span class="ss">:development</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rake&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.9&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rack&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.4.1&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;jekyll&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.12&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rdiscount&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.6.8&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;kramdown&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.13&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;coderay&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.0&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;pygments.rb&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.3.4&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;RedCloth&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 4.2.9&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;haml&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 3.1.7&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;compass&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.12.2&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rubypants&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.2.0&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;rb-fsevent&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.9&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;stringex&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.4.0&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;liquid&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 2.3.0&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;twitter&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;addressable&#39;</span>
</span><span class='line'>  <span class="n">gem</span> <span class="s1">&#39;buffer&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note the addition of last gems. You need these for bufferapp to work.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="s1">&#39;addressable&#39;</span>
</span><span class='line'><span class="n">gem</span> <span class="s1">&#39;buffer&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Rakefile</h2>

<p>Define Access Token</p>

<p>Open Rakefile and add this line after</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">## -- Misc Configs -- ## ```</span>
</span><span class='line'><span class="n">buffer_access_token</span> <span class="o">=</span> <span class="s1">&#39;your_buffer_access_token&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Adding posts to Buffer Queue</p>

<p>In the Rakefile, find this section</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># usage rake new_post[my-new-post] or rake new_post[&#39;my new post&#39;] or rake new_post (defaults to &quot;new-post&quot;)</span>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Begin a new post in </span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="n">task</span> <span class="ss">:new_post</span><span class="p">,</span> <span class="ss">:title</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">title</span>
</span><span class='line'>    <span class="n">title</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">title</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="n">title</span> <span class="o">=</span> <span class="n">get_stdin</span><span class="p">(</span><span class="s2">&quot;Enter a title for your post: &quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="k">raise</span> <span class="s2">&quot;### You haven&#39;t set anything up yet. First run `rake install` to set up an Octopress theme.&quot;</span> <span class="k">unless</span> <span class="no">File</span><span class="o">.</span><span class="n">directory?</span><span class="p">(</span><span class="n">source_dir</span><span class="p">)</span>
</span><span class='line'>  <span class="n">mkdir_p</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">new_post_ext</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">abort</span><span class="p">(</span><span class="s2">&quot;rake aborted!&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">ask</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> already exists. Do you want to overwrite?&quot;</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="o">]</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Creating new post: </span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;---&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;layout: post&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;title: </span><span class="se">\&quot;</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/&amp;/</span><span class="p">,</span><span class="s1">&#39;&amp;amp;&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;date: </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;comments: true&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;categories: &quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;---&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Modify it into this</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># usage rake new_post[my-new-post] or rake new_post[&#39;my new post&#39;] or rake new_post (defaults to &quot;new-post&quot;)</span>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Begin a new post in </span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="n">task</span> <span class="ss">:new_post</span><span class="p">,</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:buffer</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
</span><span class='line'>  <span class="k">raise</span> <span class="s2">&quot;### You haven&#39;t set anything up yet. First run `rake install` to set up an Octopress theme.&quot;</span> <span class="k">unless</span> <span class="no">File</span><span class="o">.</span><span class="n">directory?</span><span class="p">(</span><span class="n">source_dir</span><span class="p">)</span>
</span><span class='line'>  <span class="n">mkdir_p</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="n">args</span><span class="o">.</span><span class="n">with_defaults</span><span class="p">(</span><span class="ss">:title</span> <span class="o">=&gt;</span> <span class="s1">&#39;new-post&#39;</span><span class="p">,</span> <span class="ss">:tweet</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">title</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">title</span>
</span><span class='line'>  <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">source_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">posts_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">.</span><span class="si">#{</span><span class="n">new_post_ext</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">abort</span><span class="p">(</span><span class="s2">&quot;rake aborted!&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">ask</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> already exists. Do you want to overwrite?&quot;</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="o">]</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Creating new post: </span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;---&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;layout: post&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;title: </span><span class="se">\&quot;</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/&amp;/</span><span class="p">,</span><span class="s1">&#39;&amp;&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;date: </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d %H:%M&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;comments: true&quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;categories: &quot;</span>
</span><span class='line'>    <span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;---&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">buffer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">buffer</span>
</span><span class='line'>  <span class="k">if</span> <span class="ow">not</span> <span class="n">buffer</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>    <span class="c1"># add to bufferapp status queue</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s1">&#39;Adding post to Bufferapp queue, it will be pushed after deploying.&#39;</span>
</span><span class='line'>    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;buffer_queue&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>      <span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">buffer</span><span class="si">}</span><span class="s2"> - </span><span class="si">#{</span><span class="n">blog_url</span><span class="si">}#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y/%m/%d&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">title</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">/&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pushing posts to Bufferapp</p>

<p>In the Rakefile, find this section</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">##############</span>
</span><span class='line'><span class="c1"># Deploying  #</span>
</span><span class='line'><span class="c1">##############</span>
</span><span class='line'>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Default deploy task&quot;</span>
</span><span class='line'><span class="n">task</span> <span class="ss">:deploy</span> <span class="k">do</span>
</span><span class='line'>  <span class="c1"># Check if preview posts exist, which should not be published</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="s2">&quot;.preview-mode&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;## Found posts in preview mode, regenerating files ...&quot;</span>
</span><span class='line'>    <span class="no">File</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;.preview-mode&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="ss">:generate</span><span class="o">].</span><span class="n">execute</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="ss">:copydot</span><span class="o">].</span><span class="n">invoke</span><span class="p">(</span><span class="n">source_dir</span><span class="p">,</span> <span class="n">public_dir</span><span class="p">)</span>
</span><span class='line'>  <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">deploy_default</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">].</span><span class="n">execute</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Make it look like this</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">##############</span>
</span><span class='line'><span class="c1"># Deploying  #</span>
</span><span class='line'><span class="c1">##############</span>
</span><span class='line'>
</span><span class='line'><span class="n">desc</span> <span class="s2">&quot;Default deploy task&quot;</span>
</span><span class='line'><span class="n">task</span> <span class="ss">:deploy</span> <span class="k">do</span>
</span><span class='line'>  <span class="c1"># Check if preview posts exist, which should not be published</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="s2">&quot;.preview-mode&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;## Found posts in preview mode, regenerating files ...&quot;</span>
</span><span class='line'>    <span class="no">File</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;.preview-mode&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="ss">:generate</span><span class="o">].</span><span class="n">execute</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="ss">:copydot</span><span class="o">].</span><span class="n">invoke</span><span class="p">(</span><span class="n">source_dir</span><span class="p">,</span> <span class="n">public_dir</span><span class="p">)</span>
</span><span class='line'>  <span class="ss">Rake</span><span class="p">:</span><span class="ss">:Task</span><span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">deploy_default</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">].</span><span class="n">execute</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Buffer</span>
</span><span class='line'>  <span class="k">next</span> <span class="k">if</span> <span class="ow">not</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span> <span class="s1">&#39;buffer_queue&#39;</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Buffering...&quot;</span>
</span><span class='line'>  <span class="n">bufferapp</span> <span class="o">=</span> <span class="ss">Buffer</span><span class="p">:</span><span class="ss">:Client</span><span class="o">.</span><span class="n">new</span> <span class="n">buffer_access_token</span>
</span><span class='line'>  <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;buffer_queue&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
</span><span class='line'>  <span class="k">while</span> <span class="p">(</span><span class="n">line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">gets</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Buffering &#39;</span><span class="si">#{</span><span class="n">line</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; ...&quot;</span>
</span><span class='line'>    <span class="c1"># ud = bufferapp.api :get, &#39;profiles&#39;</span>
</span><span class='line'>    <span class="c1"># TODO - get profiles automatically</span>
</span><span class='line'>    <span class="n">ud</span> <span class="o">=</span> <span class="n">bufferapp</span><span class="o">.</span><span class="n">api</span> <span class="ss">:post</span><span class="p">,</span> <span class="s1">&#39;updates/create&#39;</span><span class="p">,</span> <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="n">line</span><span class="p">,</span> <span class="ss">:profile_ids</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;5xxxxxxxxxxxxxxxx&#39;</span><span class="p">,</span><span class="s1">&#39;5xxxxxxxxxxxxxxx&#39;</span><span class="o">]</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="n">ud</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Deleting queue...&quot;</span>
</span><span class='line'><span class="n">rm</span> <span class="s1">&#39;buffer_queue&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>profile_ids - you can see two values in the above code as <code>5xxxxxxxxxxxxxxxxx</code>. These are the Buffer profiles or linked social accounts where you would like to share the blog post. You can get this id from the URL of your linked social buffer account when you visit the Bufferapp dashboard.
<code>https://bufferapp.com/app/profile/5xxxxxxxxxxxxxxxxx/buffer</code></p>

<h2>Sharing</h2>

<p>Now, everything necessary to Buffer your blog post is setup. All you need is to create the blog post. To create a blog post you write</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rake</span> <span class="n">new_post</span><span class="o">[</span><span class="s1">&#39;my_awesome_blog_post_name&#39;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>For blog posts which you want to share via Bufferapp, you write</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">rake</span> <span class="n">new_post</span><span class="o">[</span><span class="s1">&#39;my_awesome_blog_post_name&#39;</span><span class="p">,</span><span class="s1">&#39;my_awesome_blog_post_title_to_be_shared_via_buffer&#39;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<h4><em>Happy blogging</em>.</h4>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[When Options -Indexes in .htaccess doesn't work]]></title>
    <link href="http://git-ashish.github.com/2013/03/15/when-options-indexes-in-htaccess-doesnt-work/"/>
    <updated>2013-03-15T19:48:00-07:00</updated>
    <id>http://git-ashish.github.com/2013/03/15/when-options-indexes-in-htaccess-doesnt-work</id>
    <content type="html"><![CDATA[<p>We&#8217;ve our sandbox server running on Amazon EC2. There are a lot of projects hosted there with each project&#8217;s .htaccess taking care of it. Apart from the various tasks that the .htaccess does, it restricts directory browsing using simple directive</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;IfModule mod_autoindex.c&gt;
</span><span class='line'>  Options -Indexes
</span><span class='line'>&lt;/IfModule&gt;</span></code></pre></td></tr></table></div></figure>


<p>But somehow on the root folder of the sandbox, this directive didn&#8217;t work. This implies, a directory specific directive was somewhere being issues. These are a few places to look for</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/etc/apache2/httpd.conf
</span><span class='line'>/etc/apache2/apache.conf
</span><span class='line'>/etc/apache2/sites-enabled/000-default</span></code></pre></td></tr></table></div></figure>


<p>In our case, the below directives were present in the <code>/etc/apache2/sites-enabled/000-default</code> file.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>DocumentRoot /var/www
</span><span class='line'>&lt;Directory /&gt;
</span><span class='line'>        Options FollowSymLinks
</span><span class='line'>        AllowOverride None
</span><span class='line'>&lt;/Directory&gt;
</span><span class='line'>&lt;Directory /var/www/&gt;
</span><span class='line'>        Options Indexes FollowSymLinks MultiViews Includes
</span><span class='line'>        AllowOverride None
</span><span class='line'>        Order allow,deny
</span><span class='line'>        allow from all
</span><span class='line'>&lt;/Directory&gt;</span></code></pre></td></tr></table></div></figure>


<p>This was changed to</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>DocumentRoot /var/www
</span><span class='line'>&lt;Directory /&gt;
</span><span class='line'>        #Options FollowSymLinks
</span><span class='line'>        Options -Indexes
</span><span class='line'>        #AllowOverride None
</span><span class='line'>&lt;/Directory&gt;
</span><span class='line'>&lt;Directory /var/www/&gt;
</span><span class='line'>        #Options Indexes FollowSymLinks MultiViews Includes
</span><span class='line'>        #AllowOverride None
</span><span class='line'>        #Order allow,deny
</span><span class='line'>        #allow from all
</span><span class='line'>        Options -Indexes
</span><span class='line'>&lt;/Directory&gt;</span></code></pre></td></tr></table></div></figure>


<p>and it worked!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setup SMTP on Bugzilla]]></title>
    <link href="http://git-ashish.github.com/2013/02/22/setup-smtp-on-bugzilla/"/>
    <updated>2013-02-22T23:33:00-08:00</updated>
    <id>http://git-ashish.github.com/2013/02/22/setup-smtp-on-bugzilla</id>
    <content type="html"><![CDATA[<p>Our startup just celebrated its 1st anniversary and we marked this by making <a href="http://www.bugzilla.org">bugzilla</a> our primary bug tracker. The bugzilla <a href="http://www.bugzilla.org/docs/4.2/en/html/index.html">docs</a> will help you setting it up.</p>

<p>We are hosting it on Ubuntu 12.04 LTS 64bit Amazon EC2 micro instance and using Amazon RDS mysql as backend. For sending bugzilla emails alerts, we choose SMTP.</p>

<p>We followed this <a href="http://dawood.in/bugzilla-alerts-using-gmail/">guide</a> but ran into some problems on the first step of installing perl module <a href="http://search.cpan.org/~fayland/Email-Send-SMTP-TLS-0.04/lib/Email/Send/SMTP/TLS.pm">Email::Send::SMTP::TLS</a>. The error we got was</p>

<p><em>Building and testing Net-SSLeay-1.52 &#8230; FAIL</em></p>

<p>This probably means that your Ubuntu is missing the Perl module for Secure Sockets Layer (SSL). You install it like this.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install libnet-ssleay-perl</span></code></pre></td></tr></table></div></figure>


<p>Next, we go ahead with the installation of Email::Send::SMTP::TLS module.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install cpanminus
</span><span class='line'>sudo cpanm Email::Send::SMTP::TLS</span></code></pre></td></tr></table></div></figure>


<p>Now, continue following this <a href="http://dawood.in/bugzilla-alerts-using-gmail/">guide</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello World - Chao Procrastination]]></title>
    <link href="http://git-ashish.github.com/2013/02/02/hello-world-chao-procrastination/"/>
    <updated>2013-02-02T06:51:00-08:00</updated>
    <id>http://git-ashish.github.com/2013/02/02/hello-world-chao-procrastination</id>
    <content type="html"><![CDATA[<p>Hello all.</p>

<p>It has been quite sometime since I entered the amazing world of Web development and the beauty of <a href="http://en.wikipedia.org/wiki/Open_source#Computer_software" title="Open Source Software">Open Source</a>.
I intend to post things here, that will hopefully help some people in some ways. This is going to be an avenue for sharing stuff that I create or think are cool in my areas of interest. A lot of stuff here is going to be highly opinionated.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Goodmorning World]]></title>
    <link href="http://git-ashish.github.com/2013/02/02/goodmorning-world/"/>
    <updated>2013-02-02T06:43:00-08:00</updated>
    <id>http://git-ashish.github.com/2013/02/02/goodmorning-world</id>
    <content type="html"><![CDATA[<p>This is going to be amazing.</p>
]]></content>
  </entry>
  
</feed>
